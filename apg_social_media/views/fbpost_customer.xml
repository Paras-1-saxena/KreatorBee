<odoo>
    <data>
        <template id="apg_social_media.fbpostforum_customer" name="Fb Post Partner">
            <head>
                <!-- meta tags -->
                <meta charset="UTF-8"/>
                <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
                <!-- title -->
                <title>Kreator Bee | Sales</title>
                <!-- external css -->
                <link rel="stylesheet" href="/custom_web_kreator/static/src/css/custom_styl.css"/>
                <!-- bootstrap css -->
                <link
                        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
                        rel="stylesheet"
                        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
                        crossorigin="anonymous"
                />
                <!-- remix icon -->
                <link
                        href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
                        rel="stylesheet"
                />
                <style>

                    .post-wrapper {
                    display: flex;
                    flex-direction: column;
                    gap: 20px;
                    align-items: center;
                    width: 100%;
                    max-width: 400px;
                    height: 90vh;
                    overflow-y: auto;
                    padding: 10px;
                    background: #fff;
                    border-radius: 10px;
                    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                    }

                    .post-wrapper::-webkit-scrollbar {
                    width: 8px;
                    }

                    .post-wrapper::-webkit-scrollbar-thumb {
                    background: #ccc;
                    border-radius: 10px;
                    }

                    .post-container {
                    width: 100%;
                    border: 1px solid #ddd;
                    border-radius: 10px;
                    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
                    padding: 15px;
                    margin-top:30px;
                    }

                    .post-header {
                    display: flex;
                    align-items: center;
                    margin-bottom: 15px;
                    }

                    .user-image {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    margin-right: 10px;
                    }

                    .user-details {
                    font-size: 14px;
                    color: #333;
                    }

                    .user-details .user-name {
                    font-weight: bold;
                    margin-right: 5px;
                    }

                    .user-details .post-date {
                    font-size: 12px;
                    color: #888;
                    }

                    .post-image {
                    width: 100%;
                    border-radius: 5px;
                    margin-bottom: 10px;
                    }

                    .post-actions {
                    display: flex;
                    justify-content: space-around;
                    margin-top: 10px;
                    border-top: 1px solid #ddd;
                    padding-top: 10px;
                    }

                    .btn {
                    border: none;
                    background: none;
                    font-size: 14px;
                    font-weight: bold;
                    color: #65676b;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    }

                    .btn i {
                    margin-right: 5px;
                    font-size: 16px;
                    }

                    .btn:hover {
                    text-decoration: underline;
                    }

                    .comment-section {
                    margin-top: 10px;
                    padding-top: 10px;
                    border-top: 1px solid #ddd;
                    }

                    .comment-input {
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #ddd;
                    border-radius: 5px;
                    font-size: 14px;
                    }
                    .post-input {
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #ddd;
                    border-radius: 5px;
                    font-size: 14px;
                    }

                    .comment-list {
                    margin-top: 10px;
                    }

                    .comment {
                    font-size: 12px;
                    color: #555;
                    margin-bottom: 5px;
                    }
                    .dashboard-header {
                    text-align: center;
                    font-size: 24px;
                    font-weight: bold;
                    color: #333;
                    margin-bottom: 20px;
                    }
                    .post-btn {
                    background-color: #ffd000;
                    color: #212529;
                    font-family: 'Poppins', sans-serif;
                    padding: 10px 15px;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    transition: background-color 0.3s ease;
                    padding:10px 20px;
                    letter-spacing: 1px;
                    }

                    .post-btn:hover {
                    background-color: #e0a800;
                    }
                    .like-btn i {
                    color: #65676B; /* Blue for Like */
                    }

                    .comment-btn i {
                    color: #28a745; /* Green for Comment */
                    }

                    .share-btn i {
                    color: #ffc107; /* Yellow for Share */
                    }
                    .update-actions {
                    display: flex;
                    justify-content: space-around;
                    }
                    .cust-main-content{
                    margin-top: 70px!important;margin-left: 100px !important;
                    }
                    @media (max-width: 769px) {
                    /* Style the input field */
                    .cust-main-content{
                    margin-top: 50px !important;margin-left: 0px !important;
                    }
                    }
                </style>
            </head>

            <body>
                <div class="layout">
                    <!-- Header -->
                    <header class="container-fluid">
                        <div
                                class="d-flex justify-content-between align-items-center border-bottom"
                        >
                            <!-- Menu Icon visible on mobile-->
                            <img
                                    class="pe-2 d-block d-lg-none hamburger"
                                    src="/custom_web_kreator/static/src/nev-icon.svg"
                            />
                            <!-- Logo -->
                            <img src="/custom_web_kreator/static/src/logo.png" style="height: 41px; width: 160px;"/>
                            <!-- Menu-->
                            <div class="d-lg-flex d-none gap-4">
                                <div
                                        class="active p-lg-2 p-1 d-flex flex-column align-items-center"
                                >
                                    <a href="/customer/mycourses" class='text-center'>
                                        <i class="ri-user-community-fill"></i>
                                        <p>
                                            Updates
                                        </p>
                                    </a>
                                </div>
                            </div>
                            <!-- Profile -->
                            <t t-call="custom_web_kreator.partner_profile_dropdown"/>
                        </div>
                    </header>
                    <div class="d-flex w-100">
                        <!-- Sidebar -->
                        <div class="sidebar border-end d-none d-lg-block">
                            <nav class="py-3 px-2">
                                <!-- Sidebar Menu -->
                                <ul class="d-flex flex-column gap-2">
                                    <a href="/customer/mycourses">
                                        <li>
                                            <i class="ri-book-open-fill"></i>
                                            My Courses
                                        </li>
                                    </a>
                                    <!-- Sales Dropdown -->
                                    <a href="/customer/courses_recommend">
                                        <li>
                                            <i class="ri-product-hunt-fill"></i>
                                            Recommended Courses
                                        </li>
                                    </a>
                                    <a href="/customer/updates">
                                        <li class="active">
                                            <i class="ri-user-community-fill"></i>
                                            Updates
                                        </li>
                                    </a>
                                </ul>
                            </nav>
                        </div>
                        <!-- Sidebar Backdrop on mobile -->
                        <div class="backdrop d-none d-lg-none"></div>

                        <!-- Main Content -->
                        <main class="flex-grow-1 p-4 overflow-auto">

                            <!-- Welcome Section -->
                            <section class="welcome">
                                <div class="d-flex gap-2 flex-column flex-lg-row align-items-lg-center justify-content-between">
                                    <h1 class="d-flex align-items-center gap-1">
                                        <img
                                                class="play"
                                                src="/custom_web_kreator/static/src/user_icon.svg"
                                        />
                                        Welcome,
                                        <t t-esc="request.env.user.name"/>
                                    </h1>
                                    <div class="d-flex gap-3 align-items-center">
                                        <a
                                                href="/tutorial"
                                        >
                                            Tutorial
                                            <img
                                                    class="ms-1"
                                                    src="/custom_web_kreator/static/src/play.png"
                                            />
                                        </a>
                                        <a
                                                href="https://wa.me/+919289384910" target="_blank" class="text-center"
                                        >
                                            <img
                                                    src="/custom_web_kreator/static/src/Whatsapp.png"
                                            />
                                            +91 9289384910
                                            <br/>
                                            <div style="font-size: 10px;">
                                                9:30 AM to 6:00 PM (Except Sundays)
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </section>
                            <!--            Main Section-->
                            <div class="row justify-content-center">
                                <div class="col-9">
                                    <input type="hidden" name="partner_type" id="partner_type"
                                           t-att-value="partner_type"/>

                                    <t t-foreach="post_ids" t-as="post">
                                        <div class="post-container o-cust-post">
                                            <div class="post-header">
                                                <img src="/custom_web_kreator/static/src/user1.png"
                                                     class="user-image"
                                                     alt="User Image"/>
                                                <div class="user-details">
                                                    <span class="user-name">
                                                        <t t-esc="post['create_uid']"/>
                                                    </span>
                                                    <span class="post-date">
                                                        <t t-if="post['create_date']">
                                                            <span t-esc="post['create_date']"/>
                                                        </t>
                                                    </span>
                                                </div>
                                            </div>
                                            <p>
                                                <t t-esc="post['message']"/>
                                            </p>
                                            <div class="row justify-content-center">
                                                <div class="col-lg-4 col-md-4 col-sm-12">
                                                    <t t-if="post['video_url']">
                                                        <div class="media_iframe_video_container o-cust-1"
                                                             style="text-align: center;">
                                                            <iframe class="w-100 rounded post-image" loading="lazy"
                                                                    frameborder="0"
                                                                    allowfullscreen="allowfullscreen"
                                                                    t-att-src="post['video_url']"
                                                                    style="border-radius: 1.1rem !important;"></iframe>
                                                        </div>
                                                    </t>
                                                    <t t-foreach="post['media']" t-as="media">
                                                        <t t-if="media['type'] == 'image'">
                                                            <!-- Render Image -->
                                                            <img t-att-src="image_data_uri(media['image'].datas) if media['image'].datas else '/custom_web_kreator/static/src/course1.png'"
                                                                 class="post-image" alt="Post Image"
                                                                 style="height: auto !important;"/>
                                                        </t>
                                                    </t>
                                                </div>
                                            </div>

                                            <input type="hidden" name="post_id" class="cust-post-id"
                                                   t-att-value="post['id']"/>
                                            <div class="post-actions">
                                                <button class="btn like-btn cust-btn like-button-js"
                                                        id="custLikebtn"
                                                        t-att-data-post-id="post['id']">
                                                    <i class="ri-thumb-up-line"
                                                       t-att-class="'ri-thumb-up-fill liked' if post['is_liked'] else 'fa fa-thumbs-up like-btn-grey'"
                                                       id="likeIcon"></i>
                                                    Like
                                                </button>
                                                <!-- <button class="btn like-btn cust-btn" id="custLikebtn" t-att-data-post-id="post['id']">
                                                    <i class="fa fa-thumbs-up like-btn-grey" id="likeIcon"></i> Like
                                                </button> -->
                                                <button class="btn comment-btn cust-btn" id="custCommentbtn"
                                                        t-att-data-com-post-id="post['id']">
                                                    <i class="ri-chat-3-fill"></i>
                                                    Comment
                                                </button>
                                            </div>
                                            <div class="comment-section">
                                                <input type="text" class="comment-input comment-input-js"
                                                       placeholder="Write a comment..." id="cust-btn-1"
                                                       t-att-data-comment-post-id="post['id']"/>
                                                <div class="row">
                                                    <div class="col-lg-1 col-md-1 col-sm-12"></div>
                                                    <div class="col-3">
                                                        <div class="comment-list"
                                                             t-att-id="'comment-list-' + str(post['id'])">
                                                            <t t-foreach="post['comments']" t-as="comment">
                                                                <div class="comment-header">
                                                                    <img src="/custom_web_kreator/static/src/user1.png"
                                                                         class="user-image img-fluid comment-user-icon"/>
                                                                    <div class="user-details comment-user">
                                                                        <span class="user-name">
                                                                            <t t-esc="comment['user']"/>
                                                                        </span>
                                                                        <span class="post-date">
                                                                            <t t-esc="comment['date']"/>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="comment-details">
                                                                    <t t-esc="comment['message']"/>
                                                                </div>
                                                            </t>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </t>
                                </div>
                            </div>
                            <script>
                                document.addEventListener('DOMContentLoaded', function () {
                                document.querySelectorAll('.like-button-js').forEach(button =&gt; {
                                button.addEventListener('click', function () {
                                const post_id = this.getAttribute('data-post-id'); // Get post ID from clicked
                                button
                                const icon = this.querySelector('#likeIcon'); // Get icon within button

                                if (!icon) {
                                console.error("Like icon not found!");
                                return;
                                }

                                if (icon.classList.contains('liked')) {
                                try {
                                fetch('/post/unlike', {
                                method: "POST",
                                headers: {
                                "Content-Type": "application/json",
                                },
                                'body': JSON.stringify({'params': {'post_id': post_id}})
                                })
                                .then(response =&gt; response.json())
                                .then(data =&gt; {

                                if (data['result'].success == true) {

                                icon.classList.remove('liked');
                                } else {
                                alert('Error processing Like action.');
                                }
                                })
                                } catch (error) {
                                console.error('Error:', error);
                                alert('Failed to Unlike post.');
                                }

                                } else {
                                try {
                                fetch('/post/like', {
                                method: "POST",
                                headers: {
                                "Content-Type": "application/json",
                                },
                                'body': JSON.stringify({'params': {'post_id': post_id}})
                                })
                                .then(response =&gt; response.json())
                                .then(data =&gt; {

                                if (data['result'].success == true) {

                                icon.classList.add('liked');
                                } else {
                                alert('Error processing Like action.');
                                }
                                })
                                } catch (error) {
                                console.error('Error:', error);
                                alert('Failed to Like post.');
                                }
                                }
                                });
                                });
                                document.querySelectorAll('.comment-input-js').forEach(input =&gt; {
                                input.addEventListener('keypress', function (event) {
                                if (event.key === "Enter") {
                                event.preventDefault(); // Prevent form submission

                                const commentText = this.value.trim();
                                const postId = this.getAttribute('data-comment-post-id'); // Get post ID

                                if (!commentText) {
                                alert("Comment cannot be empty!");
                                return;
                                }

                                fetch('/post/comment', { // Adjust this endpoint based on your controller route
                                method: "POST",
                                headers: {
                                "Content-Type": "application/json",
                                },
                                body: JSON.stringify({
                                params: {
                                post_id: postId,
                                comment: commentText
                                }
                                })
                                })
                                .then(response =&gt; response.json())
                                .then(data =&gt; {
                                if (data['result'].success == true) {

                                // Clear input field after successful submission
                                input.value = "";

                                // Append new comment to the comment list
                                const commentList = document.getElementById('comment-list-' + postId);
                                if (commentList) {
                                const newComment = document.createElement("div");
                                const newComment1 = document.createElement("div");
                                newComment.classList.add("comment-header");
                                newComment1.classList.add("comment-details");
                                newComment.innerHTML = `
                                <img src="/custom_web_kreator/static/src/user1.png"
                                     class="user-image comment-user-icon"/>
                                <div class="user-details comment-user">
                                    <span class="user-name">${data['result']['comments'][0]['user']}</span>
                                    <span class="post-date">${data['result']['comments'][0]['date']}</span>
                                </div>
                                `;
                                newComment1.innerHTML = `
                                ${commentText}
                                `;
                                commentList.appendChild(newComment);
                                commentList.appendChild(newComment1);
                                }
                                } else {
                                alert("Failed to post comment.");
                                }
                                })
                                .catch(error =&gt; {
                                console.error('Error:', error);
                                alert("Error posting comment.");
                                });
                                }
                                });
                                });
                                document.querySelectorAll('.share-btn-js').forEach(button =&gt; {
                                button.addEventListener('click', function () {
                                alert("Share feature is disabled");
                                });
                                });
                                });
                            </script>

                        </main>
                    </div>
                    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                    <script type="text/javascript" src="/apg_js/static/src/js/menu.js"></script>
                    <!--                    <link rel="stylesheet" href="/apg_js/static/src/scss/menu.css"/>-->
                    <link rel="stylesheet" href="/apg_social_media/static/src/scss/social.css"/>
                    <script src="/custom_web_kreator/static/src/js/script.js"></script>
                    <!-- bootstrap script -->
                    <script
                            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
                            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
                            crossorigin="anonymous"
                    ></script>
                </div>
            </body>
        </template>
    </data>
</odoo>
