<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <template id="course_slides_list_content_upgradable" inherit_id="website_slides.course_slides_list_slide">
            <!-- Replace all content inside the template -->
            <xpath expr="." position="replace">
                <li t-att-index="j" t-att-data-slide-id="slide.id" t-att-data-category-id="category_id"
                    t-attf-class="o_wslides_slides_list_slide o_wslides_js_list_item bg-white-50 border-top-0 d-flex align-items-center ps-2 #{'py-1 pe-2' if not channel.can_upload else ''}">
                    <div t-if="channel.can_publish" class=" o_wslides_slides_list_drag m-2 o_not_editable">
                        <i class="fa fa-sort"></i>
                    </div>
                    <i t-attf-class="fa #{slide.slide_icon_class} py-2 mx-2"/>
                    <div class="text-truncate me-auto">
                        <a t-if="not invite_preview and (slide.is_preview or channel.is_member or channel.can_publish)"
                           class="o_wslides_js_slides_list_slide_link" t-attf-href="/slides/slide/#{slug(slide)}">
                            <span t-field="slide.name"/>
                        </a>
                        <span t-else="">
                            <span t-esc="slide.name"/>
                        </span>
                    </div>

                    <div class="d-flex flex-row o_not_editable align-items-center">
                        <a name="o_wslides_list_slide_add_quizz" t-if="channel.can_upload and not slide.question_ids"
                           t-attf-href="/slides/slide/#{slug(slide)}?quiz_quick_create" aria-label="Add quiz">
                            <span class="badge text-bg-primary badge-hide fw-normal m-1">Add Quiz</span>
                        </a>
                        <a t-if="channel.can_upload" href="#" name="o_wslides_slide_toggle_is_preview"
                           aria-label="Preview">
                            <span t-att-data-slide-id="slide.id"
                                  t-attf-class="o_wslides_js_slide_toggle_is_preview badge #{'text-bg-success' if slide.is_preview else 'text-bg-primary badge-hide'} fw-normal m-1">
                                <span>Preview</span>
                            </span>
                        </a>
                        <t t-elif="slide.is_preview and not channel.is_member">
                            <span class="badge text-bg-success fw-normal m-1">
                                <span>Preview</span>
                            </span>
                        </t>
                        <span t-if="slide.is_new_slide and not channel_progress[slide.id].get('completed')"
                              class="badge text-bg-info badge-arrow-right fw-normal m-1">
                            New
                        </span>
                        <span t-if="slide.question_ids"
                              t-att-class="'badge fw-bold m-1 %s' % ('text-bg-success' if channel_progress[slide.id].get('completed') else 'text-bg-warning')">
                            <i t-attf-class="fa fa-fw #{'fa-check' if channel_progress[slide.id].get('completed') else 'fa-flag'}"/>
                            <t t-esc="channel_progress[slide.id].get('quiz_karma_won', 0) if channel_progress[slide.id].get('completed') else channel_progress[slide.id].get('quiz_karma_gain', 0)"/>
                            xp
                        </span>
                        <span class="badge text-bg-danger fw-normal m-1" t-if="not slide.website_published">
                            Unpublished
                        </span>
                    </div>

<!--                    <div t-if="channel.is_member or channel.can_publish"-->
<!--                         class="pt-2 pb-2 border-start ms-2 me-2 ps-2 d-flex flex-row align-items-center o_wslides_slides_list_slide_controls o_not_editable">-->
<!--                        <t t-call="website_slides.slide_sidebar_done_button">-->
<!--                            <t t-set="is_member" t-value="channel.is_member"/>-->
<!--                            <t t-set="slide_completed" t-value="channel_progress[slide.id].get('completed')"/>-->
<!--                            <t t-set="use_slide_icon" t-value="False"/>-->
<!--                        </t>-->
<!--                        <span t-if="channel.can_publish" class="d-none d-md-flex">-->
<!--                            <a t-if="slide.slide_category == 'article'"-->
<!--                               class="mx-2 o_text_link text-primary o_not_editable" target="_blank"-->
<!--                               t-attf-href="/slides/slide/#{slug(slide)}?enable_editor=1" title="Edit">-->
<!--                                <span class="fa fa-pencil"/>-->
<!--                            </a>-->
<!--                            <a t-else="" class="mx-2 o_text_link text-primary o_not_editable" target="_blank"-->
<!--                               t-attf-href="/odoo/slide.slide/{{slide.id}}" title="Edit in backend">-->
<!--                                <span class="fa fa-pencil"/>-->
<!--                            </a>-->
<!--                            <a href="#" t-att-data-slide-id="slide.id"-->
<!--                               class="o_text_link text-danger mx-2 o_wslides_js_slide_archive o_not_editable"-->
<!--                               title="Delete">-->
<!--                                <span class="fa fa-trash"/>-->
<!--                            </a>-->
<!--                        </span>-->
<!--                    </div>-->
                </li>
            </xpath>
        </template>
    </data>
</odoo>
